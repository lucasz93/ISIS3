<?xml version="1.0" encoding="UTF-8"?>

<application name="mar9clean" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://isis.astrogeology.usgs.gov/Schemas/Application/application.xsd">
  <brief>
    Clean-up application for Mariner9 images 
  </brief>

  <description>
    <p>
      Mar9clean performs the clean up of Mariner9 images. This includes salt 
      and pepper noise, removing reseaus, and trimming edges of invalid data. 
      The program runs mar9nonoise to clean up noise followed by findrx and 
      remrx. Several lowpass filters fill in the null areas left by the noise 
      removal. Finally a trim is also completed which nulls the top 5 rows of 
      pixels, left 11 columns pixels, and the bottom 8 rows of pixels.
    </p>
    <p>
      This program only allows itself to be run once on an image. It is 
      intended for non-compressed images only and will not run on compressed 
      images. Compressed images, technically previously compressed, are 
      distinctive because they are mostly null data with good data in a 
      checkerboard patter, see mar9restore for more info. Mar9clean should be 
      run immediately after importing and before calibration.
    </p>
  </description>

  <category>
    <missionItem>Mariner</missionItem>
  </category>

  <seeAlso>
    <applications>
      <item>findrx</item>
      <item>remrx</item>
      <item>trim</item>
      <item>lowpass</item>
      <item>marnonoise</item>
    </applications> 
  </seeAlso>

  <history>
    <change name="Ken Herkenhoff" date="????-??-??">
      Original version (as m9level1).
    </change>
    <change name="Lucas Zadrozny" date="2022-08-14">
      Ported to ISIS3.
    </change>
  </history>

  <groups>
    <group name="Files">
      <parameter name="FROM">
        <type>cube</type>
        <fileMode>input</fileMode>
        <brief>
          Input file to be cleaned
        </brief>
        <description>
          The cube to be cleaned.  The cube will be run through a series of 
          filters to remove salt and pepper noise and reseaus.
        </description>
        <filter>
          *.cub
        </filter>
      </parameter>

      <parameter name="TO">
        <type>cube</type>
        <fileMode>output</fileMode>
        <brief>
          Output cube
        </brief>
        <description>
          The resultant cube containing the clean data.
        </description>
        <filter>
          *.cub
        </filter>
      </parameter>
    </group>

    <group name="Options">
      <parameter name="REMOVE">
        <type>boolean</type>
          <brief>
            Remove intermediate files
          </brief>
        <description>
          Option to remove or leave intermediate cube files made by the 
          application.
        </description>
        <default><item>TRUE</item></default>
      </parameter>

      <parameter name="SDIM">
        <type>integer</type>
        <brief>
          Number of Samples to Remove around each Reseau
        </brief>
        <description>
          This number will be used in the remrx step of the clean up.  It is 
           the number of samples to remove around each reseau.
        </description>
        <default><item>9</item></default>
      </parameter>

      <parameter name="LDIM">
        <type>integer</type>
        <brief>
          Number of Lines to Remove around each Reseau
        </brief>
        <description>
          This number will be used in the remrx step of the clean up.  It is 
           the number of lines to remove around each reseau.
        </description>
        <default><item>9</item></default>
      </parameter> 

      <parameter name="REPEAT">
        <type>boolean</type>
        <default><item>false</item></default>
        <brief>Clean the input cube again</brief>
        <description>
            Force noise removal to happen again, even if the input cube has been previously cleaned
        </description>
      </parameter>

    </group>
  </groups>

</application>

